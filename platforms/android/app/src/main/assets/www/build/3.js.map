{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    SignupPage\n  ]\n})\nexport class SignupPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, ToastController, AlertController, NavParams } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AngularFirestore } from 'angularfire2/firestore';\n\nimport { User } from '../../providers';\n//import { StartQuestionnairePage } from '../start-questionnaire/start-questionnaire';\nimport { LoginPage } from '../login/login'\nimport { AuthService } from '../../services/auth.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n    signupError: string;\n\tsignupForm: FormGroup;\n  //login: LoginPage;\n  //main: MainPage;\n  //startQuestionnaire: StartQuestionnairePage;\n\n  // The account fields for the login form.\n  // If you're using the username field with or without email, make\n  // sure to add it to the type\n  /*account: { name: string, email: string, password: string } = {\n    name: 'Test Human',\n    email: 'test@example.com',\n    password: 'test'\n};*/\n\n  // Our translated text strings\n  //private signupErrorString: string;\n\n  constructor(public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    public translateService: TranslateService,\n    public aleCtrl: AlertController,\n    public navParams: NavParams,\n    fb: FormBuilder,\n    private auth: AuthService,\n    private readonly afs: AngularFirestore\n    ) {\n\n        this.signupForm = fb.group({\n            username: [''],\n            email: ['',Validators.required],\n\t\t\t      password: ['',Validators.required],\n            lineid: [''],\n            phonenumber: [''],\n            gender: ['']\n    \t});\n  }\n\n  signup() {\n    // Attempt to login in through our User service\n    let data = this.signupForm.value;\n\t\tlet credentials = {\n\t\t\temail: data.email,\n\t\t\tpassword: data.password\n\t\t};\n\t\tthis.auth.signUp(credentials).then(\n\t\t\t() => {\n                 this.createProfile(data);\n                },\n\t\t\terror => this.signupError = error.message\n\t\t);\n  }\n\n  createProfile(value){\n     return new Promise<any>((resolve, reject) => {\n       let currentUser = this.auth.getcurrentUser();\n       this.afs.collection('Users').doc(currentUser.uid).set({\n         gender: value.gender,  \n         lineid: value.lineid,\n         phonenumber: value.phonenumber,\n         username: value.username\n       })\n       .then(\n         res => {\n             this.navCtrl.push('StartQuestionnairePage');\n             resolve(res);},\n         err => reject(err)\n       )\n     })\n   }\n  goBackToSignIn() {\n      this.navCtrl.push('LoginPage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}